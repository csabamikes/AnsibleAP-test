plugin: device42.d42.d42
ssl_check: false  # Ha self-signed cert van, állítsd false-ra
debug: false
clean_device_name: false  # Tisztítja a készülékneveket (opcionális)
# Csak a Production service levelű gépeket húzza be
strict: false  # opcionális, ha hibás adat van, ne szakadjon meg
#fetch_custom_fields: true

keyed_groups:  # Csoportosítás Device42 adatok alapján (opcionális)
  - key: d42_service_level
    prefix: ''
    separator: ''
  #- key: d42_tags
  #  prefix: tag_
  #  separator: ''
  #- key: d42_building
  #  prefix: bld_
  #- key: d42_os_family
  #  prefix: os_
  #- key: "d42_ip_addresses | map(attribute='ip') | list"
  #  prefix: ip
  #  separator: ' '
#  - key: d42_custom_fields | selectattr('key', 'equalto', 'AAP_LNX_TYPE') | map(attribute='value') | list | first
#    separator: ""
#  - key: d42_custom_fields | selectattr('key', 'equalto', 'AAP_LNX_APP') | map(attribute='value') | list | first
#    separator: ""
#  - key: d42_custom_fields | selectattr('key', 'equalto', 'AAP_LNX_BENV') | map(attribute='value') | list | first
#    separator: ""
  - key: d42_custom_fields | selectattr('key', 'equalto', 'AAP_LNX_TYPE') | map(attribute='value')
    separator: ""
  - key: d42_custom_fields | selectattr('key', 'equalto', 'AAP_LNX_APP') | map(attribute='value')
    separator: ""
  - key: d42_custom_fields | selectattr('key', 'equalto', 'AAP_LNX_BENV') | map(attribute='value')
    separator: ""
    
groups:
  # A csoport neve: WEBSERVER_InternetWEB
  WEBSERVER_InternetWEB: >
    d42_custom_fields | selectattr('key', 'equalto', 'AAP_LNX_APP') | map(attribute='value') | first == 'WEBSERVER'
    and
    d42_custom_fields | selectattr('key', 'equalto', 'AAP_LNX_BENV') | map(attribute='value') | first == 'InternetWEB'


compose:  # Ansible változókat állíthatsz be Device42 adatokból (opcionális)
  ansible_host: d42_name
  inventory_hostname: d42_name
  ansible_fqdn: d42_name
  #ansible_host: d42_ip_address

#
